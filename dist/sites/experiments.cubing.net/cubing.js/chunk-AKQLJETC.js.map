{
  "version": 3,
  "sources": ["../../../../src/sites/experiments.cubing.net/cubing.js/twisty/demo-spin-camera.ts"],
  "sourcesContent": ["import type { TwistyPlayer } from \"../../../../cubing/twisty\";\nimport type { OrbitCoordinatesRequest } from \"../../../../cubing/twisty/model/props/viewer/OrbitCoordinatesRequestProp\";\n\nexport function getScaleParam(param: string, defaultVal: number = 1): number {\n  const str = new URL(location.href).searchParams.get(param);\n  return str === null ? defaultVal : parseFloat(str);\n}\n\nexport function demoSpinCamera(\n  twistyPlayer: TwistyPlayer,\n  tempoScale: number = 1,\n): void {\n  let lastTimestamp = performance.now();\n  const CAM_ROTATION_DEG_PER_SEC = -24 * tempoScale;\n\n  let rotating = true;\n  twistyPlayer.addEventListener(\n    \"click\",\n    () => {\n      rotating = false;\n    },\n    { once: true },\n  );\n\n  function rotate(timestamp: number): void {\n    if (!rotating) {\n      return;\n    }\n    requestAnimationFrame(rotate);\n    const delta_deg =\n      ((timestamp - lastTimestamp) / 1000) * CAM_ROTATION_DEG_PER_SEC;\n    lastTimestamp = timestamp;\n    twistyPlayer.experimentalModel.twistySceneModel.orbitCoordinatesRequest.set(\n      (async (): Promise<OrbitCoordinatesRequest> => {\n        const { longitude } =\n          await twistyPlayer.experimentalModel.twistySceneModel.orbitCoordinates.get();\n        return { longitude: longitude + delta_deg };\n      })(),\n    );\n  }\n  requestAnimationFrame(rotate);\n}\n"],
  "mappings": "AAGO,SAASA,EAAcC,EAAeC,EAAqB,EAAW,CAC3E,IAAMC,EAAM,IAAI,IAAI,SAAS,IAAI,EAAE,aAAa,IAAIF,CAAK,EACzD,OAAOE,IAAQ,KAAOD,EAAa,WAAWC,CAAG,CACnD,CAEO,SAASC,EACdC,EACAC,EAAqB,EACf,CACN,IAAIC,EAAgB,YAAY,IAAI,EAC9BC,EAA2B,IAAMF,EAEnCG,EAAW,GACfJ,EAAa,iBACX,QACA,IAAM,CACJI,EAAW,EACb,EACA,CAAE,KAAM,EAAK,CACf,EAEA,SAASC,EAAOC,EAAyB,CACvC,GAAI,CAACF,EACH,OAEF,sBAAsBC,CAAM,EAC5B,IAAME,GACFD,EAAYJ,GAAiB,IAAQC,EACzCD,EAAgBI,EAChBN,EAAa,kBAAkB,iBAAiB,wBAAwB,KACrE,SAA8C,CAC7C,GAAM,CAAE,UAAAQ,CAAU,EAChB,MAAMR,EAAa,kBAAkB,iBAAiB,iBAAiB,IAAI,EAC7E,MAAO,CAAE,UAAWQ,EAAYD,CAAU,CAC5C,GAAG,CACL,CACF,CACA,sBAAsBF,CAAM,CAC9B",
  "names": ["getScaleParam", "param", "defaultVal", "str", "demoSpinCamera", "twistyPlayer", "tempoScale", "lastTimestamp", "CAM_ROTATION_DEG_PER_SEC", "rotating", "rotate", "timestamp", "delta_deg", "longitude"]
}
