import{a as X}from"./chunk-QIOL4UIE.js";import{j as v,m as Q,o as H,q as k}from"./chunk-K5RKCHW3.js";import{c as ke}from"./chunk-SYRP7SJ5.js";var ee=!1,_=new Map;function De(o){let i=_.get(o);if(i)return i;let n=new Array(o),t=new Array(o);for(let r=0;r<o;r++)n[r]=r,t[r]=0;let e={permutation:n,orientation:t};return ee&&(Object.freeze(n),Object.freeze(t),Object.freeze(e)),_.set(o,e),e}function te(o){let i={};for(let[n,t]of Object.entries(o.orbits))i[n]=De(t.numPieces);return ee&&Object.freeze(i),i}function ie(o,i){let n=i.quantum.toString(),t=o.definition.moves[n];if(!t){let a=o.definition.experimentalDerivedMoves?.[n];a&&(t=o.algToTransformation(a).transformationData)}if(t)return y(o,t,i.amount);let e=o.definition.moves[i.toString()];if(e)return e;let r=o.definition.moves[i.invert().toString()];if(r)return y(o,r,-1);throw new Error(`Invalid move for KPuzzle (${o.name()}): ${i}`)}var c=class{constructor(i,n){this.kpuzzle=i;this.transformationData=n}toJSON(){return{experimentalPuzzleName:this.kpuzzle.name(),transformationData:this.transformationData}}invert(){return new c(this.kpuzzle,A(this.kpuzzle,this.transformationData))}#e;isIdentityTransformation(){return this.#e??(this.#e=this.isIdentical(this.kpuzzle.identityTransformation()))}static experimentalConstructIdentity(i){let n=new c(i,te(i.definition));return n.#e=!0,n}isIdentical(i){return ne(this.kpuzzle,this.transformationData,i.transformationData)}apply(i){return this.applyTransformation(this.kpuzzle.toTransformation(i))}applyTransformation(i){if(this.kpuzzle!==i.kpuzzle)throw new Error(`Tried to apply a transformation for a KPuzzle (${i.kpuzzle.name()}) to a different KPuzzle (${this.kpuzzle.name()}).`);return this.#e?new c(this.kpuzzle,i.transformationData):i.#e?new c(this.kpuzzle,this.transformationData):new c(this.kpuzzle,R(this.kpuzzle.definition,this.transformationData,i.transformationData))}applyMove(i){return this.applyTransformation(this.kpuzzle.moveToTransformation(i))}applyAlg(i){return this.applyTransformation(this.kpuzzle.algToTransformation(i))}toKState(){return g.fromTransformation(this)}repetitionOrder(){return re(this.kpuzzle.definition,this)}selfMultiply(i){return new c(this.kpuzzle,y(this.kpuzzle,this.transformationData,i))}};function L(o,i){let{permutation:n}=i,t=n.length;for(let e=0;e<t;e++)if(n[e]!==e)return!1;if(o>1){let{orientation:e}=i;for(let r=0;r<t;r++)if(e[r]!==0)return!1}return!0}function ye(o,i,n,t={}){for(let e=0;e<o.numPieces;e++)if(!t?.ignoreOrientation&&i.orientation[e]!==n.orientation[e]||!t?.ignorePermutation&&i.permutation[e]!==n.permutation[e])return!1;return!0}function ne(o,i,n){for(let[t,e]of Object.entries(o.definition.orbits))if(!ye(e,i[t],n[t]))return!1;return!0}function A(o,i){let n={};for(let t in o.definition.orbits){let e=o.definition.orbits[t],r=i[t];if(L(e.numOrientations,r))n[t]=r;else if(e.numOrientations===1){let a=new Array(e.numPieces);for(let m=0;m<e.numPieces;m++)a[r.permutation[m]]=m;n[t]={permutation:a,orientation:r.orientation}}else{let a=new Array(e.numPieces),m=new Array(e.numPieces);for(let l=0;l<e.numPieces;l++){let u=r.permutation[l];a[u]=l,m[u]=(e.numOrientations-r.orientation[l]+e.numOrientations)%e.numOrientations}n[t]={permutation:a,orientation:m}}}return n}function y(o,i,n){if(n===1)return i;if(n<0)return y(o,A(o,i),-n);if(n===0){let{transformationData:r}=o.identityTransformation();return r}let t=i;n!==2&&(t=y(o,i,Math.floor(n/2)));let e=R(o.definition,t,t);return n%2===0?e:R(o.definition,i,e)}var F=class extends Q{traverseAlg(i,n){let t=null;for(let e of i.childAlgNodes())t?t=t.applyTransformation(this.traverseAlgNode(e,n)):t=this.traverseAlgNode(e,n);return t??n.identityTransformation()}traverseGrouping(i,n){let t=this.traverseAlg(i.alg,n);return new c(n,y(n,t.transformationData,i.amount))}traverseMove(i,n){return n.moveToTransformation(i)}traverseCommutator(i,n){let t=this.traverseAlg(i.A,n),e=this.traverseAlg(i.B,n);return t.applyTransformation(e).applyTransformation(t.invert()).applyTransformation(e.invert())}traverseConjugate(i,n){let t=this.traverseAlg(i.A,n),e=this.traverseAlg(i.B,n);return t.applyTransformation(e).applyTransformation(t.invert())}traversePause(i,n){return n.identityTransformation()}traverseNewline(i,n){return n.identityTransformation()}traverseLineComment(i,n){return n.identityTransformation()}},oe=H(F);function U(o,i){return i?U(i,o%i):o}function re(o,i){let n=1;for(let t in o.orbits){let e=o.orbits[t],r=i.transformationData[t],a=new Array(e.numPieces);for(let m=0;m<e.numPieces;m++)if(!a[m]){let l=m,u=0,s=0;for(;a[l]=!0,u=u+r.orientation[l],s=s+1,l=r.permutation[l],l!==m;);u!==0&&(s=s*e.numOrientations/U(e.numOrientations,Math.abs(u))),n=n*s/U(n,s)}}return n}function R(o,i,n){let t={};for(let e in o.orbits){let r=o.orbits[e],a=i[e],m=n[e];if(L(r.numOrientations,m))t[e]=a;else if(L(r.numOrientations,a))t[e]=m;else{let l=new Array(r.numPieces);if(r.numOrientations===1){for(let u=0;u<r.numPieces;u++)l[u]=a.permutation[m.permutation[u]];t[e]={permutation:l,orientation:a.orientation}}else{let u=new Array(r.numPieces);for(let s=0;s<r.numPieces;s++)u[s]=(a.orientation[m.permutation[s]]+m.orientation[s])%r.numOrientations,l[s]=a.permutation[m.permutation[s]];t[e]={permutation:l,orientation:u}}}}return t}function B(o,i,n){let t={};for(let e in o.orbits){let r=o.orbits[e],a=i[e],m=n[e];if(L(r.numOrientations,m))t[e]=a;else{let l=new Array(r.numPieces);if(r.numOrientations===1){for(let u=0;u<r.numPieces;u++)l[u]=a.pieces[m.permutation[u]];t[e]={pieces:l,orientation:a.orientation}}else{let u=new Array(r.numPieces);for(let s=0;s<r.numPieces;s++)u[s]=(a.orientation[m.permutation[s]]+m.orientation[s])%r.numOrientations,l[s]=a.pieces[m.permutation[s]];t[e]={pieces:l,orientation:u}}}}return t}var g=class{constructor(i,n){this.kpuzzle=i;this.stateData=n}toJSON(){return{experimentalPuzzleName:this.kpuzzle.name(),stateData:this.stateData}}static fromTransformation(i){let n=B(i.kpuzzle.definition,i.kpuzzle.definition.startStateData,i.transformationData);return new g(i.kpuzzle,n)}apply(i){return this.applyTransformation(this.kpuzzle.toTransformation(i))}applyTransformation(i){if(i.isIdentityTransformation())return new g(this.kpuzzle,this.stateData);let n=B(this.kpuzzle.definition,this.stateData,i.transformationData);return new g(this.kpuzzle,n)}applyMove(i){return this.applyTransformation(this.kpuzzle.moveToTransformation(i))}applyAlg(i){return this.applyTransformation(this.kpuzzle.algToTransformation(i))}experimentalToTransformation(){if(!this.kpuzzle.canConvertStateToUniqueTransformation())return null;let i={};for(let[n,t]of Object.entries(this.stateData)){let e={permutation:t.pieces,orientation:t.orientation};i[n]=e}return new c(this.kpuzzle,i)}experimentalIsSolved(i){if(!this.kpuzzle.definition.experimentalIsStateSolved)throw new Error("`KState.experimentalIsSolved()` is not supported for this puzzle at the moment.");return this.kpuzzle.definition.experimentalIsStateSolved(this,i)}};var d=class{constructor(i,n){this.definition=i;this.#e=new Map;this.experimentalPGNotation=n?.experimentalPGNotation}name(){return this.definition.name}identityTransformation(){return c.experimentalConstructIdentity(this)}#e;moveToTransformation(i){typeof i=="string"&&(i=new v(i));let n=i.toString(),t=this.#e.get(n);if(t)return new c(this,t);if(this.experimentalPGNotation){let r=this.experimentalPGNotation.lookupMove(i);if(!r)throw new Error(`could not map to internal move: ${i}`);return this.#e.set(n,r),new c(this,r)}let e=ie(this,i);return this.#e.set(n,e),new c(this,e)}algToTransformation(i){return typeof i=="string"&&(i=new k(i)),oe(i,this)}toTransformation(i){return typeof i=="string"?this.algToTransformation(i):i?.is?.(k)?this.algToTransformation(i):i?.is?.(v)?this.moveToTransformation(i):i}startState(){return new g(this,this.definition.startStateData)}#t;canConvertStateToUniqueTransformation(){return this.#t??(this.#t=(()=>{for(let[i,n]of Object.entries(this.definition.orbits)){let t=new Array(n.numPieces).fill(!1);for(let e of this.definition.startStateData[i].pieces)t[e]=!0;for(let e of t)if(!e)return!1}return!0})())}};var be={};ke(be,{KPuzzle:()=>d,KState:()=>g,KTransformation:()=>c});var w={name:"3x3x3",orbits:{EDGES:{numPieces:12,numOrientations:2},CORNERS:{numPieces:8,numOrientations:3},CENTERS:{numPieces:6,numOrientations:4}},startStateData:{EDGES:{pieces:[0,1,2,3,4,5,6,7,8,9,10,11],orientation:[0,0,0,0,0,0,0,0,0,0,0,0]},CORNERS:{pieces:[0,1,2,3,4,5,6,7],orientation:[0,0,0,0,0,0,0,0]},CENTERS:{pieces:[0,1,2,3,4,5],orientation:[0,0,0,0,0,0]}},moves:{U:{EDGES:{permutation:[1,2,3,0,4,5,6,7,8,9,10,11],orientation:[0,0,0,0,0,0,0,0,0,0,0,0]},CORNERS:{permutation:[1,2,3,0,4,5,6,7],orientation:[0,0,0,0,0,0,0,0]},CENTERS:{permutation:[0,1,2,3,4,5],orientation:[1,0,0,0,0,0]}},y:{EDGES:{permutation:[1,2,3,0,5,6,7,4,10,8,11,9],orientation:[0,0,0,0,0,0,0,0,1,1,1,1]},CORNERS:{permutation:[1,2,3,0,7,4,5,6],orientation:[0,0,0,0,0,0,0,0]},CENTERS:{permutation:[0,2,3,4,1,5],orientation:[1,0,0,0,0,3]}},x:{EDGES:{permutation:[4,8,0,9,6,10,2,11,5,7,1,3],orientation:[1,0,1,0,1,0,1,0,0,0,0,0]},CORNERS:{permutation:[4,0,3,5,7,6,2,1],orientation:[2,1,2,1,1,2,1,2]},CENTERS:{permutation:[2,1,5,3,0,4],orientation:[0,3,0,1,2,2]}},L:{EDGES:{permutation:[0,1,2,11,4,5,6,9,8,3,10,7],orientation:[0,0,0,0,0,0,0,0,0,0,0,0]},CORNERS:{permutation:[0,1,6,2,4,3,5,7],orientation:[0,0,2,1,0,2,1,0]},CENTERS:{permutation:[0,1,2,3,4,5],orientation:[0,1,0,0,0,0]}},F:{EDGES:{permutation:[9,1,2,3,8,5,6,7,0,4,10,11],orientation:[1,0,0,0,1,0,0,0,1,1,0,0]},CORNERS:{permutation:[3,1,2,5,0,4,6,7],orientation:[1,0,0,2,2,1,0,0]},CENTERS:{permutation:[0,1,2,3,4,5],orientation:[0,0,1,0,0,0]}},R:{EDGES:{permutation:[0,8,2,3,4,10,6,7,5,9,1,11],orientation:[0,0,0,0,0,0,0,0,0,0,0,0]},CORNERS:{permutation:[4,0,2,3,7,5,6,1],orientation:[2,1,0,0,1,0,0,2]},CENTERS:{permutation:[0,1,2,3,4,5],orientation:[0,0,0,1,0,0]}},B:{EDGES:{permutation:[0,1,10,3,4,5,11,7,8,9,6,2],orientation:[0,0,1,0,0,0,1,0,0,0,1,1]},CORNERS:{permutation:[0,7,1,3,4,5,2,6],orientation:[0,2,1,0,0,0,2,1]},CENTERS:{permutation:[0,1,2,3,4,5],orientation:[0,0,0,0,1,0]}},D:{EDGES:{permutation:[0,1,2,3,7,4,5,6,8,9,10,11],orientation:[0,0,0,0,0,0,0,0,0,0,0,0]},CORNERS:{permutation:[0,1,2,3,5,6,7,4],orientation:[0,0,0,0,0,0,0,0]},CENTERS:{permutation:[0,1,2,3,4,5],orientation:[0,0,0,0,0,1]}},z:{EDGES:{permutation:[9,3,11,7,8,1,10,5,0,4,2,6],orientation:[1,1,1,1,1,1,1,1,1,1,1,1]},CORNERS:{permutation:[3,2,6,5,0,4,7,1],orientation:[1,2,1,2,2,1,2,1]},CENTERS:{permutation:[1,5,2,0,4,3],orientation:[1,1,1,1,3,1]}},M:{EDGES:{permutation:[2,1,6,3,0,5,4,7,8,9,10,11],orientation:[1,0,1,0,1,0,1,0,0,0,0,0]},CORNERS:{permutation:[0,1,2,3,4,5,6,7],orientation:[0,0,0,0,0,0,0,0]},CENTERS:{permutation:[4,1,0,3,5,2],orientation:[2,0,0,0,2,0]}},E:{EDGES:{permutation:[0,1,2,3,4,5,6,7,9,11,8,10],orientation:[0,0,0,0,0,0,0,0,1,1,1,1]},CORNERS:{permutation:[0,1,2,3,4,5,6,7],orientation:[0,0,0,0,0,0,0,0]},CENTERS:{permutation:[0,4,1,2,3,5],orientation:[0,0,0,0,0,0]}},S:{EDGES:{permutation:[0,3,2,7,4,1,6,5,8,9,10,11],orientation:[0,1,0,1,0,1,0,1,0,0,0,0]},CORNERS:{permutation:[0,1,2,3,4,5,6,7],orientation:[0,0,0,0,0,0,0,0]},CENTERS:{permutation:[1,5,2,0,4,3],orientation:[1,1,0,1,0,1]}},u:{EDGES:{permutation:[1,2,3,0,4,5,6,7,10,8,11,9],orientation:[0,0,0,0,0,0,0,0,1,1,1,1]},CORNERS:{permutation:[1,2,3,0,4,5,6,7],orientation:[0,0,0,0,0,0,0,0]},CENTERS:{permutation:[0,2,3,4,1,5],orientation:[1,0,0,0,0,0]}},l:{EDGES:{permutation:[2,1,6,11,0,5,4,9,8,3,10,7],orientation:[1,0,1,0,1,0,1,0,0,0,0,0]},CORNERS:{permutation:[0,1,6,2,4,3,5,7],orientation:[0,0,2,1,0,2,1,0]},CENTERS:{permutation:[4,1,0,3,5,2],orientation:[2,1,0,0,2,0]}},f:{EDGES:{permutation:[9,3,2,7,8,1,6,5,0,4,10,11],orientation:[1,1,0,1,1,1,0,1,1,1,0,0]},CORNERS:{permutation:[3,1,2,5,0,4,6,7],orientation:[1,0,0,2,2,1,0,0]},CENTERS:{permutation:[1,5,2,0,4,3],orientation:[1,1,1,1,0,1]}},r:{EDGES:{permutation:[4,8,0,3,6,10,2,7,5,9,1,11],orientation:[1,0,1,0,1,0,1,0,0,0,0,0]},CORNERS:{permutation:[4,0,2,3,7,5,6,1],orientation:[2,1,0,0,1,0,0,2]},CENTERS:{permutation:[2,1,5,3,0,4],orientation:[0,0,0,1,2,2]}},b:{EDGES:{permutation:[0,5,10,1,4,7,11,3,8,9,6,2],orientation:[0,1,1,1,0,1,1,1,0,0,1,1]},CORNERS:{permutation:[0,7,1,3,4,5,2,6],orientation:[0,2,1,0,0,0,2,1]},CENTERS:{permutation:[3,0,2,5,4,1],orientation:[3,3,0,3,1,3]}},d:{EDGES:{permutation:[0,1,2,3,7,4,5,6,9,11,8,10],orientation:[0,0,0,0,0,0,0,0,1,1,1,1]},CORNERS:{permutation:[0,1,2,3,5,6,7,4],orientation:[0,0,0,0,0,0,0,0]},CENTERS:{permutation:[0,4,1,2,3,5],orientation:[0,0,0,0,0,1]}}}};w.experimentalDerivedMoves={Uw:"u",Lw:"l",Fw:"f",Rw:"r",Bw:"b",Dw:"d",Uv:"y",Lv:"x'",Fv:"z",Rv:"x",Bv:"z'",Dv:"y'","2U":"u U'","2L":"l L'","2F":"f F'","2R":"r R'","2B":"b B'","2D":"d D'"};var ae="Last Layer",se="Last Slot",x={"3x3x3":ae,megaminx:ae},T={"3x3x3":se,megaminx:se},j={full:{groups:{"3x3x3":"Stickering",megaminx:"Stickering"}},OLL:{groups:x},PLL:{groups:x},LL:{groups:x},EOLL:{groups:x},COLL:{groups:x},OCLL:{groups:x},CPLL:{groups:x},CLL:{groups:x},EPLL:{groups:x},ELL:{groups:x},ZBLL:{groups:x},LS:{groups:T},ELS:{groups:T},CLS:{groups:T},ZBLS:{groups:T},VLS:{groups:T},WVLS:{groups:T},F2L:{groups:{"3x3x3":"CFOP (Fridrich)"}},Daisy:{groups:{"3x3x3":"CFOP (Fridrich)"}},Cross:{groups:{"3x3x3":"CFOP (Fridrich)"}},EO:{groups:{"3x3x3":"ZZ"}},EOline:{groups:{"3x3x3":"ZZ"}},EOcross:{groups:{"3x3x3":"ZZ"}},CMLL:{groups:{"3x3x3":"Roux"}},L10P:{groups:{"3x3x3":"Roux"}},L6E:{groups:{"3x3x3":"Roux"}},L6EO:{groups:{"3x3x3":"Roux"}},"2x2x2":{groups:{"3x3x3":"Petrus"}},"2x2x3":{groups:{"3x3x3":"Petrus"}},L2C:{groups:{"4x4x4":"Reduction","5x5x5":"Reduction","6x6x6":"Reduction"}},PBL:{groups:{"2x2x2":"Ortega"}},"Void Cube":{groups:{"3x3x3":"Miscellaneous"}},invisible:{groups:{"3x3x3":"Miscellaneous"}},picture:{groups:{"3x3x3":"Miscellaneous"}},"centers-only":{groups:{"3x3x3":"Miscellaneous"}},"experimental-centers-U":{},"experimental-centers-U-D":{},"experimental-centers-U-L-D":{},"experimental-centers-U-L-B-D":{},"experimental-centers":{},"experimental-fto-fc":{groups:{fto:"Bencisco"}},"experimental-fto-f2t":{groups:{fto:"Bencisco"}},"experimental-fto-sc":{groups:{fto:"Bencisco"}},"experimental-fto-l2c":{groups:{fto:"Bencisco"}},"experimental-fto-lbt":{groups:{fto:"Bencisco"}},"experimental-fto-l3t":{groups:{fto:"Bencisco"}}};function Z(o){let i=o.stateData.CENTERS.pieces[0],n=o.stateData.CENTERS.pieces[5],t=o.stateData.CENTERS.pieces[1],e=t;return i<t&&e--,n<t&&e--,[i,e]}var me=new Array(6).fill(0).map(()=>new Array(6)),Te=!1;function ue(){if(!Te){let o=["","z","x","z'","x'","x2"].map(n=>k.fromString(n)),i=new k("y");for(let n of o){let t=ce.algToTransformation(n);for(let e=0;e<4;e++){t=t.applyAlg(i);let[r,a]=Z(t.toKState());me[r][a]=t.invert()}}}return me}function le(o){let[i,n]=Z(o),t=ue()[i][n];return o.applyTransformation(t)}function W(o,i){return i.ignorePuzzleOrientation&&(o=le(o)),i.ignoreCenterOrientation&&(o=new g(o.kpuzzle,{EDGES:o.stateData.EDGES,CORNERS:o.stateData.CORNERS,CENTERS:{pieces:o.stateData.CENTERS.pieces,orientation:new Array(6).fill(0)}})),!!o.experimentalToTransformation()?.isIdentityTransformation()}async function he(o){let i=await(o.puzzleSpecificSimplifyOptions??o.puzzleSpecificSimplifyOptionsPromise);return i?{puzzleLoader:{puzzleSpecificSimplifyOptions:i}}:{}}function $(o){let n=o.experimentalToTransformation().invert().transformationData.CORNERS;return n.permutation[6]*3+n.orientation[6]}var pe=new Array(24),Ke=!1;function fe(o){if(!Ke){let i=["","z","x","z'","x'","x2"].map(t=>k.fromString(t)),n=new k("y");for(let t of i){let e=o.algToTransformation(t);for(let r=0;r<4;r++){e=e.applyAlg(n);let a=$(e.toKState());pe[a]={transformation:e.invert(),alg:t.concat(n)}}}}return pe}function Oe(o){let i=$(o),{transformation:n,alg:t}=fe(o.kpuzzle)[i];return{normalizedState:o.applyTransformation(n),normalizationAlg:t.invert()}}function Ee(o,i,n,t,e){let a=o.orbits[i].pieces[n];if(a===null)return P;let m=a.facelets?.[t];return m===null?P:typeof m=="string"?m:e?m.hintMask??m.mask:(console.log(m),m.mask)}var D=class{constructor(i,n){this.stickerings=new Map;for(let[t,e]of Object.entries(i.definition.orbits))this.stickerings.set(t,new Array(e.numPieces).fill(n))}},P="regular",z="ignored",h="oriented",N="invisible",b="dim",ve={["Regular"]:{facelets:[P,P,P,P,P]},["Ignored"]:{facelets:[z,z,z,z,z]},["OrientationStickers"]:{facelets:[h,h,h,h,h]},["IgnoreNonPrimary"]:{facelets:[P,z,z,z,z]},["Invisible"]:{facelets:[N,N,N,N,N]},["PermuteNonPrimary"]:{facelets:[b,P,P,P,P]},["Dim"]:{facelets:[b,b,b,b,b]},["Ignoriented"]:{facelets:[b,z,z,z,z]},["OrientationWithoutPermutation"]:{facelets:[h,z,z,z,z]}};function ze(o){return ve[o]}var M=class extends D{constructor(i){super(i,"Regular")}set(i,n){for(let[t,e]of this.stickerings.entries())for(let r=0;r<e.length;r++)i.stickerings.get(t)[r]&&(e[r]=n);return this}toStickeringMask(){let i={orbits:{}};for(let[n,t]of this.stickerings.entries()){let e=[],r={pieces:e};i.orbits[n]=r;for(let a of t)e.push(ze(a))}return i}},I=class{constructor(i){this.kpuzzle=i}and(i){let n=new D(this.kpuzzle,!1);for(let[t,e]of Object.entries(this.kpuzzle.definition.orbits)){e:for(let r=0;r<e.numPieces;r++){n.stickerings.get(t)[r]=!0;for(let a of i)if(!a.stickerings.get(t)[r]){n.stickerings.get(t)[r]=!1;continue e}}}return n}or(i){let n=new D(this.kpuzzle,!1);for(let[t,e]of Object.entries(this.kpuzzle.definition.orbits)){e:for(let r=0;r<e.numPieces;r++){n.stickerings.get(t)[r]=!1;for(let a of i)if(a.stickerings.get(t)[r]){n.stickerings.get(t)[r]=!0;continue e}}}return n}not(i){let n=new D(this.kpuzzle,!1);for(let[t,e]of Object.entries(this.kpuzzle.definition.orbits))for(let r=0;r<e.numPieces;r++)n.stickerings.get(t)[r]=!i.stickerings.get(t)[r];return n}all(){return this.and(this.moves([]))}move(i){let n=this.kpuzzle.moveToTransformation(i),t=new D(this.kpuzzle,!1);for(let[e,r]of Object.entries(this.kpuzzle.definition.orbits))for(let a=0;a<r.numPieces;a++)(n.transformationData[e].permutation[a]!==a||n.transformationData[e].orientation[a]!==0)&&(t.stickerings.get(e)[a]=!0);return t}moves(i){return i.map(n=>this.move(n))}orbits(i){let n=new D(this.kpuzzle,!1);for(let t of i)n.stickerings.get(t).fill(!0);return n}orbitPrefix(i){let n=new D(this.kpuzzle,!1);for(let t in this.kpuzzle.definition.orbits)t.startsWith(i)&&n.stickerings.get(t).fill(!0);return n}};async function ge(o,i){let n=await o.kpuzzle(),t=new M(n),e=new I(n),r=()=>e.move("U"),a=()=>e.or(e.moves(["U","D"])),m=()=>e.or(e.moves(["L","R"])),l=()=>e.not(m()),u=()=>e.not(r()),s=()=>e.orbitPrefix("CENTER"),S=()=>e.orbitPrefix("EDGE"),p=()=>e.or([e.orbitPrefix("CORNER"),e.orbitPrefix("C4RNER"),e.orbitPrefix("C5RNER")]),K=()=>e.or([l(),e.and([r(),S()])]),O=()=>e.and([r(),s()]),J=()=>e.and([e.and(e.moves(["F","R"])),S()]),G=()=>e.and([e.and(e.moves(["F","R"])),p(),e.not(r())]),C=()=>e.or([G(),J()]);function f(){t.set(u(),"Dim")}function xe(){t.set(r(),"PermuteNonPrimary"),t.set(O(),"Dim")}function E(){t.set(r(),"IgnoreNonPrimary"),t.set(O(),"Regular")}function de(){t.set(r(),"Ignoriented"),t.set(O(),"Dim")}switch(i){case"full":break;case"PLL":{f(),xe();break}case"CLS":{f(),t.set(G(),"Regular"),t.set(r(),"Ignoriented"),t.set(e.and([r(),s()]),"Dim"),t.set(e.and([r(),p()]),"IgnoreNonPrimary");break}case"OLL":{f(),E();break}case"EOLL":{f(),E(),t.set(e.and([r(),p()]),"Ignored");break}case"COLL":{f(),t.set(e.and([r(),S()]),"Ignoriented"),t.set(e.and([r(),s()]),"Dim"),t.set(e.and([r(),p()]),"Regular");break}case"OCLL":{f(),de(),t.set(e.and([r(),p()]),"IgnoreNonPrimary");break}case"CPLL":{f(),t.set(e.and([p(),r()]),"PermuteNonPrimary"),t.set(e.and([e.not(p()),r()]),"Dim");break}case"CLL":{f(),t.set(e.not(e.and([p(),r()])),"Dim");break}case"EPLL":{f(),t.set(r(),"Dim"),t.set(e.and([r(),S()]),"PermuteNonPrimary");break}case"ELL":{f(),t.set(r(),"Dim"),t.set(e.and([r(),S()]),"Regular");break}case"ELS":{f(),E(),t.set(e.and([r(),p()]),"Ignored"),t.set(J(),"Regular"),t.set(G(),"Ignored");break}case"LL":{f();break}case"F2L":{t.set(r(),"Ignored");break}case"ZBLL":{f(),t.set(r(),"PermuteNonPrimary"),t.set(O(),"Dim"),t.set(e.and([r(),p()]),"Regular");break}case"ZBLS":{f(),t.set(C(),"Regular"),E(),t.set(e.and([r(),p()]),"Ignored");break}case"VLS":{f(),t.set(C(),"Regular"),E();break}case"WVLS":{f(),t.set(C(),"Regular"),t.set(e.and([r(),S()]),"Ignoriented"),t.set(e.and([r(),s()]),"Dim"),t.set(e.and([r(),p()]),"IgnoreNonPrimary");break}case"LS":{f(),t.set(C(),"Regular"),t.set(r(),"Ignored"),t.set(O(),"Dim");break}case"EO":{t.set(p(),"Ignored"),t.set(S(),"OrientationWithoutPermutation");break}case"EOline":{t.set(p(),"Ignored"),t.set(S(),"OrientationWithoutPermutation"),t.set(e.and(e.moves(["D","M"])),"Regular");break}case"EOcross":{t.set(S(),"OrientationWithoutPermutation"),t.set(e.move("D"),"Regular"),t.set(p(),"Ignored");break}case"CMLL":{t.set(u(),"Dim"),t.set(K(),"Ignored"),t.set(e.and([r(),p()]),"Regular");break}case"L10P":{t.set(e.not(K()),"Dim"),t.set(e.and([p(),r()]),"Regular");break}case"L6E":{t.set(e.not(K()),"Dim");break}case"L6EO":{t.set(e.not(K()),"Dim"),t.set(K(),"OrientationWithoutPermutation"),t.set(e.and([s(),a()]),"OrientationStickers");break}case"Daisy":{t.set(e.all(),"Ignored"),t.set(s(),"Dim"),t.set(e.and([e.move("D"),s()]),"Regular"),t.set(e.and([e.move("U"),S()]),"IgnoreNonPrimary");break}case"Cross":{t.set(e.all(),"Ignored"),t.set(s(),"Dim"),t.set(e.and([e.move("D"),s()]),"Regular"),t.set(e.and([e.move("D"),S()]),"Regular");break}case"2x2x2":{t.set(e.or(e.moves(["U","F","R"])),"Ignored"),t.set(e.and([e.or(e.moves(["U","F","R"])),s()]),"Dim");break}case"2x2x3":{t.set(e.all(),"Dim"),t.set(e.or(e.moves(["U","F","R"])),"Ignored"),t.set(e.and([e.or(e.moves(["U","F","R"])),s()]),"Dim"),t.set(e.and([e.move("F"),e.not(e.or(e.moves(["U","R"])))]),"Regular");break}case"L2C":{t.set(e.or(e.moves(["L","R","B","D"])),"Dim"),t.set(e.not(s()),"Ignored");break}case"PBL":{t.set(e.all(),"Ignored"),t.set(e.or(e.moves(["U","D"])),"PermuteNonPrimary");break}case"Void Cube":{t.set(s(),"Invisible");break}case"picture":case"invisible":{t.set(e.all(),"Invisible");break}case"centers-only":{t.set(e.not(s()),"Ignored");break}default:console.warn(`Unsupported stickering for ${o.id}: ${i}. Setting all pieces to dim.`),t.set(e.and(e.moves([])),"Dim")}return t.toStickeringMask()}async function Pe(o,i){let n=[],t=[];for(let[e,r]of Object.entries(j))r.groups&&(o in r.groups?n.push(e):i?.use3x3x3Fallbacks&&"3x3x3"in r.groups&&t.push(e));return n.concat(t)}function Le(o){let i=null;return()=>i??(i=o())}async function Ne(o){return(await import("./puzzle-geometry-OIWNBVFY.js")).getPuzzleGeometryByName(o,{allMoves:!0,orientCenters:!0,addRotations:!0})}async function Ce(o,i){let n=await o,t=n.getKPuzzleDefinition(!0);t.name=i;let e=await import("./puzzle-geometry-OIWNBVFY.js"),r=new e.ExperimentalPGNotation(n,n.getOrbitsDef(!0));return new d(t,{experimentalPGNotation:r})}var Y=class{constructor(i){this.puzzleSpecificSimplifyOptionsPromise=q(this.kpuzzle.bind(this));this.pgId=i.pgID,this.id=i.id,this.fullName=i.fullName,this.inventedBy=i.inventedBy,this.inventionYear=i.inventionYear}#e;pg(){return this.#e??(this.#e=Ne(this.pgId??this.id))}#t;kpuzzle(){return this.#t??(this.#t=Ce(this.pg(),this.id))}#i;svg(){return this.#i??(this.#i=(async()=>(await this.pg()).generatesvg())())}},Se=class extends Y{constructor(){super(...arguments);this.stickerings=()=>Pe(this.id,{use3x3x3Fallbacks:!0})}stickeringMask(n){return ge(this,n)}};function q(o){return new X(async i=>{let n=await o();i({quantumMoveOrder:t=>n.moveToTransformation(new v(t)).repetitionOrder()})})}async function V(o){return(await import("./puzzle-geometry-OIWNBVFY.js")).getPuzzleGeometryByDesc(o,{allMoves:!0,orientCenters:!0,addRotations:!0})}async function we(o){let i=await V(o),n=i.getKPuzzleDefinition(!0);n.name=`description: ${o}`;let t=await import("./puzzle-geometry-OIWNBVFY.js"),e=new t.ExperimentalPGNotation(i,i.getOrbitsDef(!0));return new d(n,{experimentalPGNotation:e})}var Me=1;function Ie(o,i){let n=Me++,t=null,e=async()=>t??(t=we(o)),r={id:`custom-${n}`,fullName:i?.fullName??`Custom Puzzle (instance #${n})`,kpuzzle:e,svg:async()=>(await V(o)).generatesvg(),pg:async()=>V(o),puzzleSpecificSimplifyOptionsPromise:q(e)};return i?.inventedBy&&(r.inventedBy=i.inventedBy),i?.inventionYear&&(r.inventionYear=i.inventionYear),r}var ce=new d(w);w.experimentalIsStateSolved=W;export{g as a,d as b,be as c,w as d,Z as e,ue as f,le as g,he as h,j as i,Oe as j,Ee as k,ze as l,M as m,I as n,ge as o,Pe as p,Le as q,Ne as r,Y as s,Se as t,Ie as u,ce as v};
//# sourceMappingURL=chunk-CM3DPZVF.js.map
