var s=class{constructor(c,o,i){this.sectors=c;this.swipeChangeListener=o;this.swipeFinishListener=i;this.sectorIndices=new Map;this.activeTouchesByID=new Map;this.activeTouches=[];for(let[t,e]of this.sectors.entries())this.sectorIndices.set(e,t),e.addEventListener("touchstart",this.touchStart.bind(this,e)),e.addEventListener("touchmove",this.touchMove.bind(this)),e.addEventListener("touchend",this.touchEnd.bind(this,e)),e.addEventListener("touchcancel",this.touchEnd.bind(this,e))}reset(){this.activeTouches=[],this.activeTouchesByID.clear()}isSwipeStillActive(c){return this.activeTouches.includes(c)}dispatchTouchChange(){this.swipeChangeListener(this.activeTouches)}touchStart(c,o){for(let i of o.changedTouches){let t={sourceSector:c,currentSector:c,hasMovedAwayFromSourceSector:!1,touchIdentifier:i.identifier};this.activeTouchesByID.set(i.identifier,t),this.activeTouches.push(t)}o.preventDefault(),this.dispatchTouchChange()}touchMove(c){let o=!1;for(let i of c.changedTouches){let t=this.activeTouchesByID.get(i.identifier),e=document.elementFromPoint(i.pageX,i.pageY);!(e&&this.sectorIndices.has(e))||t.currentSector!==e&&(t.currentSector=e,e!==t.sourceSector&&(t.hasMovedAwayFromSourceSector=!0),o=!0)}o&&this.dispatchTouchChange()}touchEnd(c,o){for(let i of o.changedTouches){let t=this.activeTouchesByID.get(i.identifier);this.activeTouchesByID.delete(i.identifier);let e=this.activeTouches.indexOf(t);this.activeTouches.splice(e,1),this.swipeFinishListener(t.sourceSector,t.currentSector)}this.dispatchTouchChange()}};export{s as a};
//# sourceMappingURL=chunk-VEMOVSEF.js.map
