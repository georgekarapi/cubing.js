import"../chunk-2ILZXDOR.js";import{g as b}from"../chunk-6XI26NMX.js";import"../chunk-67YDZMJZ.js";import"../chunk-VCEJJ6IO.js";import"../chunk-FQVAE53Z.js";import"../chunk-KYICZVAX.js";import"../chunk-VFJPQATA.js";import"../chunk-F3UND4MX.js";import{c as k}from"../chunk-S4ZNJEAB.js";import{a as y,b as m}from"../chunk-CM3DPZVF.js";import"../chunk-QIOL4UIE.js";import"../chunk-K5RKCHW3.js";import"../chunk-SYRP7SJ5.js";var s="twsearch/text-ui/def",i="twsearch/text-ui/search",E="twsearch/text-ui/checked-moves";async function A(){return JSON.stringify((await k.kpuzzle()).definition,null,"  ").replace(/,\n *(\d)/g,", $1").replace(/\[\n +(\d)/g,"[$1").replace(/\n +\]/g,"]").replace(/( *)\}\n( *)\}/g,"$2}}")}function v(t,a){try{new m(JSON.parse(t.value)),localStorage[a]=t.value,t.classList.add("valid"),t.classList.remove("invalid")}catch(p){throw t.classList.add("invalid"),t.classList.remove("valid"),p}}(async()=>{document.querySelector("#reset-def-search").addEventListener("click",()=>{delete localStorage[s],delete localStorage[i],location.reload()}),document.querySelector("#reset-move-subset").addEventListener("click",()=>{delete localStorage[E],location.reload()}),document.querySelector("#toggle-move-subset").addEventListener("click",()=>{for(let o of Array.from(u.querySelectorAll("input[type=checkbox")))o.checked=!o.checked,n[o.value]=!n[o.value];h()});let t=document.querySelector("#def");t.value=localStorage[s]?localStorage[s]:await A(),v(t,s),t.addEventListener("input",()=>v(t,s));let a=document.querySelector("#search");a.value=localStorage[i]?localStorage[i]:`{
  "CORNERS": {
    "pieces": [0, 1, 2, 3, 4, 5, 6, 7],
    "orientation": [1, 2, 0, 0, 0, 0, 0, 0]
  }
}`,v(a,i),a.addEventListener("input",()=>v(a,i));let p=document.querySelector("#go"),u=document.querySelector("#move-subset"),x=document.querySelector("#min-depth"),S=document.querySelector("#results"),n={};try{n=JSON.parse(localStorage.getItem(E)??"{}")}catch{}async function f(){let o=new m(JSON.parse(t.value));u.textContent="";let r=Object.keys(o.definition.moves).concat(Object.keys(o.definition.experimentalDerivedMoves??{})).sort(function(e,l){return e.localeCompare(l)});for(let e of r){let l=`move-${e}`,d=u.appendChild(document.createElement("label"));d.setAttribute("for",l),d.setAttribute("style","border: 1px solid; padding: 0 0.5em;");let c=d.appendChild(document.createElement("input"));if(c.type="checkbox",c.value=e,c.id=l,e in n)c.checked=n[e];else{let g=!e.endsWith("v")&&e.toLowerCase()!==e;n[e]=g,c.checked=g}let L=d.appendChild(document.createElement("label"));L.textContent=e,L.setAttribute("for",l),c.addEventListener("input",()=>{n[e]=c.checked,h()})}h()}t.addEventListener("input",f),f();function h(){localStorage.setItem(E,JSON.stringify(n))}function T(){let o=[];for(let r of Array.from(u.querySelectorAll("input[type=checkbox")))r.checked&&o.push(r.value);return o}p.addEventListener("click",async()=>{let o=new m(JSON.parse(t.value)),r=new y(o,JSON.parse(a.value));S.value="Searching...";try{S.value=(await b(o,r,{moveSubset:T(),minDepth:parseInt(x.value)})).toString()}catch(e){throw S.value=`Error:
`+e,e}})})();
//# sourceMappingURL=text-ui.js.map
