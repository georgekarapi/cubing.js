import{a as l,e as c,f as b,g as y,v as M}from"./chunk-CM3DPZVF.js";function S(r){let e=new Array(r);for(let t=0;t<r;t++)e[t]=t;return e}function p(r,e){let t=0;for(let o of e)t*=r,t+=o;return t}function f(r,e,t){let o=[];for(;t>0;)o.push(t%r),t=Math.floor(t/r);return new Array(e-o.length).fill(0).concat(o.reverse())}function s(r){let e=r.length,t=0;for(let o=0;o<e-1;o++){t=t*(e-o);for(let n=o+1;n<e;n++)r[o]>r[n]&&(t+=1)}return t}function m(r,e){let t=new Array(r);t[r-1]=0;for(let o=r-2;o>=0;o--){t[o]=e%(r-o),e=Math.floor(e/(r-o));for(let n=o+1;n<r;n++)t[n]>=t[o]&&(t[n]=t[n]+1)}return t}function B(r,e,t){return r.applyTransformation(b()[e][t].invert())}var d=[29,12,16,13,3,2,1,12];function I(r){let e=0;for(let t of r)e+=t;return e}function T(r,e){let t=new Uint8Array(e),o=0,n=0,a=0,i=[];for(let u of r){for(;n<u;)a=a<<8|t[o++],n+=8;i.push(a>>n-u&(1<<u)-1),n-=u}return i}function h(r,e){let t=new Uint8Array(Math.ceil(I(r)/8)),o=0,n=0,a=0;for(let i=0;i<r.length;i++)for(a=a<<r[i]|e[i],n+=r[i];n>=8;)t[o++]=a>>n-8,n-=8;return n>0&&(t[o++]=a<<8-n),t}function k(r){return r.poIdxU!==7}function z(r){let e=y(r),t=s(e.stateData.EDGES.pieces),o=p(2,e.stateData.EDGES.orientation),n=s(e.stateData.CORNERS.pieces),a=p(3,e.stateData.CORNERS.orientation),[i,u]=c(r),x=1,L=p(4,e.stateData.CENTERS.orientation);return{epLex:t,eoMask:o,cpLex:n,coMask:a,poIdxU:i,poIdxL:u,moSupport:x,moMask:L}}function C(r){let{epLex:e,eoMask:t,cpLex:o,coMask:n,poIdxU:a,poIdxL:i,moSupport:u,moMask:x}=r;return h(d,[e,t,o,n,a,i,u,x])}function $(r){let e=z(r);return C(e)}function w(r){let[e,t,o,n,a,i,u,x]=T(d,r);return{epLex:e,eoMask:t,cpLex:o,coMask:n,poIdxU:a,poIdxL:i,moSupport:u,moMask:x}}function E(r){if(r.moSupport!==1)throw new Error("Must support center orientation.");let e=new l(M,{EDGES:{pieces:m(12,r.epLex),orientation:f(2,12,r.eoMask)},CORNERS:{pieces:m(8,r.cpLex),orientation:f(3,8,r.coMask)},CENTERS:{pieces:S(6),orientation:f(4,6,r.moMask)}});return k(r)?B(e,r.poIdxU,r.poIdxL):e}function U(r){let e=[];return(r.epLex<0||r.epLex>=479001600)&&e.push(`epLex (${r.epLex}) out of range`),(r.cpLex<0||r.cpLex>=40320)&&e.push(`cpLex (${r.cpLex}) out of range`),(r.coMask<0||r.coMask>=6561)&&e.push(`coMask (${r.coMask}) out of range`),(r.poIdxU<0||r.poIdxU>=6)&&k(r)&&e.push(`poIdxU (${r.poIdxU}) out of range`),(r.eoMask<0||r.eoMask>=4096)&&e.push(`eoMask (${r.eoMask}) out of range`),(r.moMask<0||r.moMask>=4096)&&e.push(`moMask (${r.moMask}) out of range`),(r.poIdxL<0||r.poIdxL>=4)&&e.push(`poIdxL (${r.poIdxL}) out of range`),(r.moSupport<0||r.moSupport>=2)&&e.push(`moSupport (${r.moSupport}) out of range`),e}function D(r){let e=w(r),t=U(e);if(t.length!==0)throw new Error(`Invalid binary state components: ${t.join(", ")}`);return E(e)}export{z as a,$ as b,w as c,E as d,D as e};
//# sourceMappingURL=chunk-JDD2UWSX.js.map
