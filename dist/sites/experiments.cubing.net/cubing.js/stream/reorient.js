import"../chunk-MQN5DVPY.js";import"../chunk-LWA7II2Q.js";import"../chunk-5XPORB2B.js";import{i as f,j as y,k as h}from"../chunk-WKWCM3NN.js";import"../chunk-F3UND4MX.js";import"../chunk-S4ZNJEAB.js";import{v as S}from"../chunk-CM3DPZVF.js";import"../chunk-QIOL4UIE.js";import{j as a,l as z}from"../chunk-K5RKCHW3.js";import"../chunk-SYRP7SJ5.js";function P(r){if(r?.type!=="move")throw new Error("Received non-move.");if(!z(r?.detail?.move,a))throw new Error("Event detail move was not a `Move`.");return r}var w="ULFRBD",M={U:[new a("y"),"D"],L:[new a("x'"),"R"],F:[new a("z"),"B"],R:[new a("x"),"L"],B:[new a("z"),"F"],D:[new a("y'"),"U"]},v=class{constructor(){this.state=S.startState()}processMove(t){if("xyz".includes(t.family))return this.state=this.state.applyMove(t),[t];if(t.family.slice(-1)==="w"){let[o,e]=M[t.family.slice(-1)];return this.processMove(o).concat(this.processMove(t.modified({family:e})))}else if(t.family===t.family.toLowerCase()){let[o,e]=M[t.family.toUpperCase()];return this.processMove(o).concat(this.processMove(t.modified({family:e})))}else{let o=w.indexOf(t.family),e=w[this.state.stateData.CENTERS.pieces.indexOf(o)];return[t.modified({family:e})]}}},c=class extends EventTarget{constructor(o){super();this.orientationTracker=new v;o.addEventListener("move",e=>this.onMove(P(e)))}dispatchMove(o){this.dispatchEvent(new CustomEvent("move",{detail:o}))}onMove(o){let e=this.orientationTracker.processMove(o.detail.move);for(let n of e)this.dispatchMove({move:n})}};var g=new y(`
:host {
  width: 384px;
  height: 256px;
  display: grid;

  font-family: "Ubuntu", sans-serif;
}

.wrapper {
  display: grid;
  place-content: center;
  gap: 0.5em;
}
`);var m=class extends EventTarget{constructor(o){super();this.puzzle=o;o.addAlgLeafListener(e=>{let n=e.latestAlgLeaf.as(a);!n||this.dispatchEvent(new CustomEvent("move",{detail:{move:n}}))})}static async connect(){let e=await(await import("../bluetooth-2JNOVY2L.js")).connectSmartPuzzle();return new m(e)}disconnect(){this.puzzle.disconnect()}},l=class extends EventTarget{constructor(o){super();this.puzzle=o;o.addAlgLeafListener(e=>{let n=e.latestAlgLeaf.as(a);!n||this.dispatchEvent(new CustomEvent("move",{detail:{move:n}}))})}static async connect(){let e=await(await import("../bluetooth-2JNOVY2L.js")).debugKeyboardConnect();return new l(e)}disconnect(){this.puzzle.disconnect()}},p=class extends h{constructor(){super(),this.addCSS(g),this.addElement(document.createElement("span")).textContent="Connect a stream source:";let t=this.addSource("\u{1F4E1} Bluetooth",m);this.addSource("\u2328\uFE0F Keyboard",l),this.addStreamSource(),navigator?.bluetooth||(t.disabled=!0)}addSource(t,o){let e=this.addElement(document.createElement("button"));return e.textContent=t,e.addEventListener("click",async()=>{let n=await o.connect();e.disabled=!0,e.textContent+=" \u2705",n.addEventListener("move",s=>{this.dispatchEvent(new CustomEvent("move",s))})}),e}addStreamSource(){let t="SENTINEL",o=this.addElement(document.createElement("button"));o.textContent="\u{1F534} Get Twizzle streams";let e=this.addElement(document.createElement("select"));e.appendChild(document.createElement("option")).textContent="Streams",e.disabled=!0;let n=null;o.addEventListener("click",async()=>{let s=(await import("../stream-QCN4BW33.js")).ExperimentalTwizzleStreamServer;n||(n=new s);let d=await n.streams();e.textContent="",e.disabled=!1;let i=e.appendChild(document.createElement("option"));i.textContent=`Select a stream (${d.length} available)`,i.value=t;for(let u of d){let b=u.senders[0],E=e.appendChild(document.createElement("option"));E.value=u.streamID,E.textContent=`${b.name} (${u.streamID.slice(-2)})`}}),e.addEventListener("change",()=>{let s=e.value;if(s===t)return;n.connect(s).addEventListener("move",i=>{console.log(i),this.dispatchEvent(new CustomEvent("move",i))})})}};f.define("twisty-stream-source",p);var x=document.querySelector("twisty-stream-source"),L=document.querySelector("#reoriented"),T=document.querySelector("#unreoriented"),C=new c(x);C.addEventListener("move",r=>{console.log(r.detail.move.toString()),L.experimentalAddMove(r.detail.move)});x.addEventListener("move",r=>{"xyz".includes(r.detail.move.family)||T.experimentalAddMove(r.detail.move)});console.log(C);
//# sourceMappingURL=reorient.js.map
